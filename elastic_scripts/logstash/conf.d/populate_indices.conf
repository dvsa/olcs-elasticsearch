input {
    jdbc {
        jdbc_driver_library => "/opt/dvsa/olcs/mysql-connector-java-5.1.41-bin.jar"
        jdbc_driver_class => "com.mysql.jdbc.Driver"
        jdbc_connection_string => "jdbc:mysql://olcsdb-rds.olcs.reg.nonprod.dvsa.aws:3306/OLCS_RDS_OLCSDB"
        jdbc_user => "olcsapi"
        jdbc_password => "somevariable"
        schedule => "* * * * *"
        statement => "CALL sp_elastic_address(:sql_last_value)"
        type => "address"
        last_run_metadata_path => "/etc/logstash/lastrun/address.lastrun"
    }
}

input {
    jdbc {
        jdbc_driver_library => "/opt/dvsa/olcs/mysql-connector-java-5.1.41-bin.jar"
        jdbc_driver_class => "com.mysql.jdbc.Driver"
        jdbc_connection_string => "jdbc:mysql://olcsdb-rds.olcs.reg.nonprod.dvsa.aws:3306/OLCS_RDS_OLCSDB"
        jdbc_user => "olcsapi"
        jdbc_password => "somevariable"
        schedule => "* * * * *"
        statement => "call sp_elastic_application(:sql_last_value)"
        type => "application"
        last_run_metadata_path => "/etc/logstash/lastrun/application.lastrun"
    }
}

input {
    jdbc {
        jdbc_driver_library => "/opt/dvsa/olcs/mysql-connector-java-5.1.41-bin.jar"
        jdbc_driver_class => "com.mysql.jdbc.Driver"
        jdbc_connection_string => "jdbc:mysql://olcsdb-rds.olcs.reg.nonprod.dvsa.aws:3306/OLCS_RDS_OLCSDB"
        jdbc_user => "olcsapi"
        jdbc_password => "somevariable"
        schedule => "* * * * *"
        statement => "call sp_elastic_busreg(:sql_last_value)"
        type => "busreg"
        last_run_metadata_path => "/etc/logstash/lastrun/busreg.lastrun"
    }
}

input {
    jdbc {
        jdbc_driver_library => "/opt/dvsa/olcs/mysql-connector-java-5.1.41-bin.jar"
        jdbc_driver_class => "com.mysql.jdbc.Driver"
        jdbc_connection_string => "jdbc:mysql://olcsdb-rds.olcs.reg.nonprod.dvsa.aws:3306/OLCS_RDS_OLCSDB"
        jdbc_user => "olcsapi"
        jdbc_password => "somevariable"
        schedule => "* * * * *"
        statement => "call sp_elastic_case(:sql_last_value)"
        type => "case"
        last_run_metadata_path => "/etc/logstash/lastrun/case.lastrun"
    }
}

input {
    jdbc {
        jdbc_driver_library => "/opt/dvsa/olcs/mysql-connector-java-5.1.41-bin.jar"
        jdbc_driver_class => "com.mysql.jdbc.Driver"
        jdbc_connection_string => "jdbc:mysql://olcsdb-rds.olcs.reg.nonprod.dvsa.aws:3306/OLCS_RDS_OLCSDB"
        jdbc_user => "olcsapi"
        jdbc_password => "somevariable"
        schedule => "* * * * *"
        statement => "call sp_elastic_irfo(:sql_last_value)"
        type => "irfo"
        last_run_metadata_path => "/etc/logstash/lastrun/irfo.lastrun"
    }
}
input {
    jdbc {
        jdbc_driver_library => "/opt/dvsa/olcs/mysql-connector-java-5.1.41-bin.jar"
        jdbc_driver_class => "com.mysql.jdbc.Driver"
        jdbc_connection_string => "jdbc:mysql://olcsdb-rds.olcs.reg.nonprod.dvsa.aws:3306/OLCS_RDS_OLCSDB"
        jdbc_user => "olcsapi"
        jdbc_password => "somevariable"
        schedule => "* * * * *"
        statement => "call sp_elastic_licence(:sql_last_value)"
        type => "licence"
        last_run_metadata_path => "/etc/logstash/lastrun/licence.lastrun"
    }
}

input {
    jdbc {
        jdbc_driver_library => "/opt/dvsa/olcs/mysql-connector-java-5.1.41-bin.jar"
        jdbc_driver_class => "com.mysql.jdbc.Driver"
        jdbc_connection_string => "jdbc:mysql://olcsdb-rds.olcs.reg.nonprod.dvsa.aws:3306/OLCS_RDS_OLCSDB"
        jdbc_user => "olcsapi"
        jdbc_password => "somevariable"
        schedule => "* * * * *"
        statement => "call sp_elastic_person(:sql_last_value)"
        type => "person"
        last_run_metadata_path => "/etc/logstash/lastrun/person.lastrun"
    }
}

input {
    jdbc {
        jdbc_driver_library => "/opt/dvsa/olcs/mysql-connector-java-5.1.41-bin.jar"
        jdbc_driver_class => "com.mysql.jdbc.Driver"
        jdbc_connection_string => "jdbc:mysql://olcsdb-rds.olcs.reg.nonprod.dvsa.aws:3306/OLCS_RDS_OLCSDB"
        jdbc_user => "olcsapi"
        jdbc_password => "somevariable"
        schedule => "* * * * *"
        statement => "call sp_elastic_psv_disc(:sql_last_value)"
        type => "psv_disc"
        last_run_metadata_path => "/etc/logstash/lastrun/psv_disc.lastrun"
    }
}

input {
    jdbc {
        jdbc_driver_library => "/opt/dvsa/olcs/mysql-connector-java-5.1.41-bin.jar"
        jdbc_driver_class => "com.mysql.jdbc.Driver"
        jdbc_connection_string => "jdbc:mysql://olcsdb-rds.olcs.reg.nonprod.dvsa.aws:3306/OLCS_RDS_OLCSDB"
        jdbc_user => "olcsapi"
        jdbc_password => "somevariable"
        schedule => "* * * * *"
        statement => "call sp_elastic_publication(:sql_last_value)"
        type => "publication"
        last_run_metadata_path => "/etc/logstash/lastrun/publication.lastrun"
    }
}
input {
    jdbc {
        jdbc_driver_library => "/opt/dvsa/olcs/mysql-connector-java-5.1.41-bin.jar"
        jdbc_driver_class => "com.mysql.jdbc.Driver"
        jdbc_connection_string => "jdbc:mysql://olcsdb-rds.olcs.reg.nonprod.dvsa.aws:3306/OLCS_RDS_OLCSDB"
        jdbc_user => "olcsapi"
        jdbc_password => "somevariable"
        schedule => "* * * * *"
        statement => "call sp_elastic_user(:sql_last_value)"
        type => "user"
        last_run_metadata_path => "/etc/logstash/lastrun/user.lastrun"
    }
}

input {
    jdbc {
        jdbc_driver_library => "/opt/dvsa/olcs/mysql-connector-java-5.1.41-bin.jar"
        jdbc_driver_class => "com.mysql.jdbc.Driver"
        jdbc_connection_string => "jdbc:mysql://olcsdb-rds.olcs.reg.nonprod.dvsa.aws:3306/OLCS_RDS_OLCSDB"
        jdbc_user => "olcsapi"
        jdbc_password => "somevariable"
        schedule => "* * * * *"
        statement => "call sp_elastic_vehicle_current(:sql_last_value)"
        type => "vehicle_current"
        last_run_metadata_path => "/etc/logstash/lastrun/vehicle_current.lastrun"
    }
}

input {
    jdbc {
        jdbc_driver_library => "/opt/dvsa/olcs/mysql-connector-java-5.1.41-bin.jar"
        jdbc_driver_class => "com.mysql.jdbc.Driver"
        jdbc_connection_string => "jdbc:mysql://olcsdb-rds.olcs.reg.nonprod.dvsa.aws:3306/OLCS_RDS_OLCSDB"
        jdbc_user => "olcsapi"
        jdbc_password => "somevariable"
        schedule => "* * * * *"
        statement => "call sp_elastic_vehicle_removed(:sql_last_value)"
        type => "vehicle_removed"
        last_run_metadata_path => "/etc/logstash/lastrun/vehicle_removed.lastrun"
    }
}

filter {
    mutate {
        rename => {
            "_id" => "doc_id"
        }
    }
}

output {
    if [type] == "address" {
        elasticsearch {
            hosts => ["http://search.olcs.reg.nonprod.dvsa.aws:9200"]
            index => "address"
            document_id => "%{doc_id}"
            document_type => "address"
            template => "/etc/logstash/templates/address.json"
            manage_template => true
            template_overwrite => true
            template_name => "address"
        }
    }

    if [type] == "application" {
        elasticsearch {
            hosts => ["http://search.olcs.reg.nonprod.dvsa.aws:9200"]
            index => "application"
            document_id => "%{doc_id}"
            document_type => "application"
            template => "/etc/logstash/templates/application.json"
            manage_template => true
            template_overwrite => true
            template_name => "application"
        }
    }

    if [type] == "busreg" {
        elasticsearch {
            hosts => ["http://search.olcs.reg.nonprod.dvsa.aws:9200"]
            index => "busreg"
            document_id => "%{doc_id}"
            document_type => "busreg"
            template => "/etc/logstash/templates/busreg.json"
            manage_template => true
            template_overwrite => true
            template_name => "busreg"
        }
    }

    if [type] == "case" {
        elasticsearch {
            hosts => ["http://search.olcs.reg.nonprod.dvsa.aws:9200"]
            index => "case"
            document_id => "%{doc_id}"
            document_type => "case"
            template => "/etc/logstash/templates/case.json"
            manage_template => true
            template_overwrite => true
            template_name => "case"
        }
    }

    if [type] == "irfo" {
        elasticsearch {
            hosts => ["http://search.olcs.reg.nonprod.dvsa.aws:9200"]
            index => "irfo"
            document_id => "%{doc_id}"
            document_type => "irfo"
            template => "/etc/logstash/templates/irfo.json"
            manage_template => true
            template_overwrite => true
            template_name => "irfo"
        }
    }

    if [type] == "licence" {
        elasticsearch {
            hosts => ["http://search.olcs.reg.nonprod.dvsa.aws:9200"]
            index => "licence"
            document_id => "%{doc_id}"
            document_type => "licence"
            template => "/etc/logstash/templates/licence.json"
            manage_template => true
            template_overwrite => true
            template_name => "licence"
        }
    }

    if [type] == "person" {
        elasticsearch {
            hosts => ["http://search.olcs.reg.nonprod.dvsa.aws:9200"]
            index => "person"
            document_id => "%{doc_id}"
            document_type => "person"
            template => "/etc/logstash/templates/person.json"
            manage_template => true
            template_overwrite => true
            template_name => "person"
        }
    }

    if [type] == "psv_disc" {
        elasticsearch {
            hosts => ["http://search.olcs.reg.nonprod.dvsa.aws:9200"]
            index => "psv_disc"
            document_id => "%{doc_id}"
            document_type => "psv_disc"
            template => "/etc/logstash/templates/psv_disc.json"
            manage_template => true
            template_overwrite => true
            template_name => "psv_disc"
        }
    }

    if [type] == "publication" {
        elasticsearch {
            hosts => ["http://search.olcs.reg.nonprod.dvsa.aws:9200"]
            index => "publication"
            document_id => "%{doc_id}"
            document_type => "publication"
            template => "/etc/logstash/templates/publication.json"
            manage_template => true
            template_overwrite => true
            template_name => "publication"
        }
    }

    if [type] == "user" {
        elasticsearch {
            hosts => ["http://search.olcs.reg.nonprod.dvsa.aws:9200"]
            index => "user"
            document_id => "%{doc_id}"
            document_type => "user"
            template => "/etc/logstash/templates/user.json"
            manage_template => true
            template_overwrite => true
            template_name => "user"
        }
    }

    if [type] == "vehicle_current" {
        elasticsearch {
            hosts => ["http://search.olcs.reg.nonprod.dvsa.aws:9200"]
            index => "vehicle_current"
            document_id => "%{doc_id}"
            document_type => "%{type}"
            template => "/etc/logstash/templates/vehicle_current.json"
            manage_template => true
            template_overwrite => true
            template_name => "vehicle_current"
        }
    }

    if [type] == "vehicle_removed" {
        elasticsearch {
            hosts => ["http://search.olcs.reg.nonprod.dvsa.aws:9200"]
            index => "vehicle_removed"
            document_id => "%{doc_id}"
            document_type => "vehicle_removed"
            template => "/etc/logstash/templates/vehicle_removed.json"
            manage_template => true
            template_overwrite => true
            template_name => "vehicle_removed"
        }
    }

}